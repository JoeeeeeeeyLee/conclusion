# git-toolkit-v2.2 conclusion

## 遇到的问题

技术的问题有很多总结下来很多，就不一一细述，代码编写方面，有一点感悟

### 测试驱动开发

- 在最近的一个读取版本信息的bug中收获到的一些感悟

原本的这个issue的要求是自动读取项目的版本信息文件，之前考虑到的是，没有版本信息文件就强制输入，有版本信息文件的情形下就要可以不要求输入，如果不输入直接就使用默认的，输入则使用输入的
一开始对待代码的改进思路是每次改完之后，重新打包，重新运行，但是因为这个逻辑比较麻烦，不停的删除version添加version，导致到后面乱了，这种情况主要原因是当时不知道这种情况如何写这个单元测试，但是后来想一下可以换一种方式，把函数中涉及到的这一部分读取的片段放入到单元测试函数中，只对这一部分逻辑进行测试

### google搜索以及查看文档的注意事项

- 在最近的一个开发新特性的issue中则收到了别的感悟

在代码调试的过程中遇到了一个特别奇葩的问题，使用go中的cobra包运行git shortlog命令的时候，无论是在main函数中进行调用或者是debug都会有值输出，但是在单元测试中则不会输出任何值，这是一个特别奇葩的问题，最开始是有几种猜测，因为代码是直接从别人哪里取到的，所以下意识对代码的信任度较高，没想到会落下一个字符串，导致这个命令显示不出来；
另一方面是对google搜索问题时出现了一些问题，我们知道一般使用google都是关键词搜索，但是我当时搜索的是go git shortlog这就导致直接给我指向了git shortlog的官方文档，虽然最终结果确实是在官方文档中显示了，但是我在看一个全英文的文档的时候只是想直接关注命令，并没有注意到description，这提醒我以后看文档要详细，要关注description这种片段，而正确的搜索方式则是go exec git shortlog，才会直接指向解答，这提醒我们直接使用go的范围太大了，不能精准的定位，**在有使用这种go包的时候我们应该将这个包名或者方法名都加上来进行搜索**

### 对需求的模糊理解

- 在开发一个需求的时候理解出现了差错

本身的需求是检查代码提交到某个仓库他的邮箱是否满足某个规范比如某个OA邮箱，但是我错误的将其理解成了限制只能提交到某个具体的仓库，其实我在开发的时候也感觉不对啊，这样这个代码不是就只能写到这个固定仓库了么，不能写到github这种了，但是我并没有及时的提出我的疑问，而是继续开发完成，导致后面的返工，这是很大的教训，**以后在开发之前一定要清楚的看issue的描述，必须确保自己正确理解了他的意思才可以**

### 对内置的工具包的使用

go语言是方便的，内置了很多的函数可以帮助我们实现一些基础的功能，比如各式各样对字符串的处理，以后在开发的时候遇到某种功能函数的涉及，应该先找一下官方文档上是否已经为我们实现了，或者已经实现了一部分，我们可以在其基础上进行封装

### 一些敏感信息的设置

当我们在一些配置文件的敏感变量的设置值的时候，不应该直接写入到配置文件中，而是应该在对应的git仓库中进行设置，以免泄漏信息

### 集成中的一些问题

在进行持续集成的时候，make编译之后文件是放到一个文件目录下的，如果要在下一个阶段设置，可以创建临时目录，然后复制到临时目录下面，再进行使用

### 优雅的代码

之前在获得返回的作者名邮箱以及提交次数时，没有使用结构体，同时读取配置文件的时候也没有使用结构体来优雅的读取，导致代码可读性较差

```bash
git shortlog --author='.com' --no-merges v2.1.1 --pretty=format:'* %s (%ad) [view commit %h](https://github.com/JoeeeeeeeyLee/note/commits/%h)'   --date=format:'%Y-%m-%d %H:%M:%S'
```
